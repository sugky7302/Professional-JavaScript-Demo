<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    (function () {
        function updateAnimations() {
            doAnimation1();
            doAnimation2();
            // 其他动画
        }

        setInterval(updateAnimations, 100);
    })();

    function updateProgress() {
        var div = document.getElementById('status');
        div.style.width = (parseInt(div.style.width, 10) + 5) + '%';

        if (div.style.left != '100%') {
            mozRequestAnimationFrame(updateProgress);
        }
    }

    mozRequestAnimationFrame(updateProgress);

    function draw(timestamp) {
        // 计算两次重绘的时间间隔
        var diff = timestamp - startTime;

        // 使用diff确定下一步的绘制时间

        // 把startTime重写为这一次的重绘时间
        startTime = timestamp;

        // 重绘UI
        mozRequestAnimationFrame(draw);
    }

    var startTime = mozAnimationStartTime;
    mozRequestAnimationFrame(draw);

    (function () {
        function draw(timestamp) {
            // 计算两次重绘时间间隔
            var drawStart = (timestamp || Date.now()),
                diff = drawStart - startTime;

            // 使用diff确定下一步的绘制时间

            // 把startTime重写为这一次的绘制时间
            startTime = drawStart;

            // 重绘UI
            requestAnimationFrame(draw);
        }

        var requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame,
            startTime = window.mozAnimationStartTime || Date.now();
        requestAnimationFrame(draw);
    })();

    function isHiddenSupported() {
        return typeof (document.hidden || document.msHidden || document.webkitHidden) != 'undefined';
    }

    if (document.hidden || document.msHidden || document.webkitHidden) {
        // 页面隐藏了
    } else {
        // 页面未隐藏
    }
</script>
</body>
</html>